<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <link rel="stylesheet" type="text/css" href="css/general.css" />
    <title>Sheetmusic Import</title>
</head>

<body>
    <p>
        <center>
            <img src="images/sheetmusic-tiny.png" />
        </center>
    </p>
    <a id="pdf" />
    <h2>PDF</h2>
    <p>
        The input source for music books are standard PDFs. The books are imported page-by-page into the
        <a href="prefs.html#locations">sheetmusic directory</a>. The standard output page format is a PNG (portable network graphic), but other formats can be selected
        in the <a href="prefs.html#book-settings">preferences panel.</a>
        <a id="" markup" />
    <p>
        Currently there is no facility to mark up the final pages displayed. If you want to mark them with playing
        notes, you can annotate the original PDFs and reimport the documents into the system.
    </p>
    <a id="pdf-format" />
    <h2>PDF Tagging</h2>
    <p>
        PDFs can have additional information added that will be used during the import. This will require the use of the python
        library PyPDF. The data can be in one of two places:
        <br/>
        <h3>Properties</h3>
        <p>Some properties will be copied from the PDF and used during import.
            <ul>
                <li><b>Title</b>This will be used as the document name.</li>
                <li><b>Author</b> - Not to be confused with composer, the author can be the person that did the arrangement, or the 
                company that published the work.</li>
                <li><b>Producer</b> - The name of the program that produced the PDF</li>
                <li><b>Creation Date</b> - Included to document when the PDF was created.</li>
            </ul>
            </p>
        <h3>Annotations</h3>
        <p>You can add a text annotation (i.e. note) with text tags that can be used to identify the book.
            <ul>
                <li><b>Title:</b> - This will be used as the documet name, and will override the property value.</li>
                <li><b>Author</b> - Not to be confused with composer, the author can be the person that did the arrangement, or the 
                    company that published the work. This will override the Properties value.
                <li><b>Composer:</b> - Used to populate the composer name. If the name isn't in the system it will be added.</li>
                <li><b>Genre:</b> - Used to populate the genre. If the name isn't in the system it will be added.</li>
                <li><b>Link:</b> - The HTML link to the file source or information on the sheetmusic.</li>
            </ul>
        </p>
    </p>
    <a id="import" />
    <h2>How to Import One or More PDFs</h2>
    <p>
        PDF documents must be reformatted for use in the system. The process is:
        <ol>
            <li>Select the file(s) from the system using the standard file picker.</li>
            <li>Fill in the import information. This will include the name of the book, the number of pages, and starting page.</li>
            <li>Select Execute. This will run the script and perform the convesion.</li> 
            
        </ol>
        The default program used is
        <a href="https://ghostscript.com">ghostscript</a>,
        which will read each page and write them out to the sheetmusic directory.
    </p>
    <a id="select-files" />
    <h3>Select the files(s) from the system</h3>
    <p>
        From the File menu, select <bold>import music->import PDF... </bold><br/>
        <img src="images/menu-file-import-music.png" />
    <br/>
        A file selection dialog will open to allow you to select multiplefiles from the system. 
    </p>
    <a id="import-information" />
    <h3>Fill in the import information</h3>
    <p>
        You will be prompted to enter the information about each PDF. The name of the document and
        total number of pages is read from the PDF file. This feature will only happen if you have installed PyPDF2. If
        this is not present, you will need to fill out the fields yourself.</p>
    <p>
        <img src="images/file-import-prompt.png" /><br />
    <ul>
        <li>Name: this will either come from the PDF information or the file name. You may enter anything you like but
            you must not enter a starting period, or use 'special characters'. This name will be used to create a file directory name in the
            system, so normal filename rules apply.<br /></li>
        <li>Composer and Genre (see below)<br /></li>
        <li>Offset to page 1: PDFs of sheetmusic sometimes have title and introduction pages before the book numbering
            starts. The program will display either a 'book' page or a 'page'. The book page is absolute while the
            'page' should be the same as displayed on the monitor. In order to adjust book numberings, you should enter
            the offset here. For example, if there are three pages before you see 'Page 1' on the monitor, enter 3. This
            field can be changed later in the Properties dialog box if wrong.<br /></li>
        <li>Last page number: This is the last page shown in the book. It defaults to the total number of pages
            converted, or the total number of pages in the PDF.<br /></li>
    </ul>
    </p>
    <p>
    <h3>Composer and Genre</h3>You can select the composer and genre from the dropdown menus. If you need to add a new
    entry, just type over the
    selection. The system comes with a number of popular composers (mostly classical) and typical genres. The
    entries <b>Unknown</b> are standard and must not be removed.</b></p>
    <p><img src="images/file-import-prompt-composer.png" /><img src="images/file-import-prompt-genre.png" /></p>
    <p>
        If any of the files have been imported before, you will be prompted to confirm the selection before proceeding.
        Select all files to be reproccessed, then select <b>Include Files</b>. If you don't want to reprocess any files,
        select <b>Skip All</b>.<br />
        <img src="images/file-import-prompt-reprocess.png" />
    </p>
    <a id="execute-script" />
    <h3>Execute the script</h3>
    <p>Before processing every file, you will also be shown the script and output pane. The Script panel will show you
        what is going to be executed. You can edit the scipt if you want to make little 'tweeks' to it. The original
        source is in the <a href="prefs.html#pref-script">Preferences Script panel</a>.<br /><br />
        <img src="images/file-import-script.png" /><br />When you hit <b>Execute</b> the script will run and the output
        will be shown in the <b>Output</b> tab.<br /><br/>
        <img src="images/file-import-output.png" /></b>
    </p>
    <h3>What is <a href="ghostscript.html">Ghostscript?</h3></a>
    <p>Ghostscript is an open source program that can be installed easily in your system. (Some systems come
        with it on installation.) The SheetMusic program will run a script to convert the PDF and display the progress
        to you. The <a href="ghostscript.html">script can be altered</a>, along with the parameters passed to the
        program.
        The script that comes with the program has been tested only on a Mac system, but will be tested on additonal
        systems as it nears completion.
    </p>
    
    <a id="reimport" />
    <h2>Re-Import PDFs</h2>
    <p>
        Once a document has been imported into the system, you can re-import it quite easily. You only need to
        select
        <b>File->Import...->Reimport</b> and select the previously imported document into the system. The previous
        document will be completly deleted but the <a href="bookmarks.html">bookmarks</a> will be re-loaded once the
        process is complete.
    </p>
    <p>
        Re-importing a document allows you to mark up the PDF and bring those changes back into the system with very
        little effort.
        If you add pages, however, the bookmarks you set will not be correct. You will need to delete the bookmarks
        that are wrong or
        <a href="bookmarks.html#delete-all">delete all the bookmarks</a> for the book.
    </p>

</body>